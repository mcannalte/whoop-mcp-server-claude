#!/usr/bin/env node

// WHOOP MCP Server - Standalone executable
// Usage: node whoop-mcp-server.js

import dotenv from 'dotenv';
import { WhoopMcpServer } from './dist/mcp-server.js';
import { WhoopApiConfig } from './dist/types.js';

// Load environment variables
dotenv.config();

// Validate required environment variables
const requiredEnvVars = ['WHOOP_CLIENT_ID', 'WHOOP_CLIENT_SECRET', 'WHOOP_REDIRECT_URI'];
const missingVars = requiredEnvVars.filter(varName => !process.env[varName]);

if (missingVars.length > 0) {
  console.error('Missing required environment variables:', missingVars.join(', '));
  console.error('Please create a .env file based on env.example');
  process.exit(1);
}

// Create WHOOP API configuration
const config: WhoopApiConfig = {
  clientId: process.env.WHOOP_CLIENT_ID!,
  clientSecret: process.env.WHOOP_CLIENT_SECRET!,
  redirectUri: process.env.WHOOP_REDIRECT_URI!,
};

// Create and run the MCP server
const server = new WhoopMcpServer(config);

server.run().catch((error) => {
  console.error('Failed to start WHOOP MCP Server:', error);
  process.exit(1);
});
